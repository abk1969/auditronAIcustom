from typing import Callable; from fastapi import FastAPI; from app.core.base import Base; from app.core.database import db; from app.core.logging import get_logger; logger = get_logger(__name__); def create_start_app_handler(app: FastAPI) -> Callable: async def start_app() -> None: Base.metadata.create_all(bind=db.engine); logger.info("Tables créées avec succès"); return start_app; def create_stop_app_handler(app: FastAPI) -> Callable: async def stop_app() -> None: db.dispose(); logger.info("Ressources libérées avec succès"); return stop_app
